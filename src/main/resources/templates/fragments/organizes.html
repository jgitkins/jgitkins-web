<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<body>
<section class="panel"
		 th:fragment="list"
		 hx-get="/fragments/organizes"
		 hx-trigger="load, every 20s"
		 hx-swap="outerHTML">
	<div class="panel__header">
		<div>
			<h2>접근 가능한 조직</h2>
			<p>로그인 사용자 기준으로 확인 가능한 조직 목록입니다.</p>
		</div>
		<div class="panel__meta">
			<span th:text="${#temporals.format(lastUpdated, 'yyyy-MM-dd HH:mm:ss')}">업데이트</span>
			<button class="ghost" hx-get="/fragments/organizes" hx-swap="outerHTML">새로고침</button>
		</div>
	</div>

	<div class="panel__body" th:if="${dashboard.errorMessage() != null}">
		<div class="alert">[[${dashboard.errorMessage()}]]</div>
	</div>

	<div class="panel__body" th:if="${dashboard.errorMessage() == null}">
		<div class="empty" th:if="${#lists.isEmpty(dashboard.organizes())}">
			<p>등록된 조직이 없습니다.</p>
			<button class="primary">첫 조직 만들기</button>
		</div>
		<ul class="organize-list" th:if="${!#lists.isEmpty(dashboard.organizes())}">
			<li class="organize-card" th:each="organize : ${dashboard.organizes()}">
				<div>
					<h3 th:text="${organize.name()}">Organize Name</h3>
					<p th:text="${organize.description()}">Description</p>
				</div>
				<div class="organize-meta">
					<span th:text="${#temporals.format(organize.createdAt(), 'yyyy-MM-dd')}">날짜</span>
					<button class="ghost">상세 보기</button>
				</div>
			</li>
		</ul>
	</div>
</section>
</body>
</html>
